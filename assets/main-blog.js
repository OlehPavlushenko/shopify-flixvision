class BlogLoadMore extends HTMLElement{constructor(){super(),window.currentPage=1,this.querySelector(".js-blog-load-more").addEventListener("click",this.loadNextPage.bind(this))}getQueryForBlogPagination(e){const t=new URLSearchParams(window.location.search);let o="";for(let e of t)"page"!==e[0]&&(""!==o&&(o+="&"),o+=`${e[0]}=${e[1]}`);return`?section_id=${e}&page=${window.currentPage}${""!==o?"&":""}`+o}loadNextPage(){const e=document.getElementById("main-blog-post-grid").dataset.id;window.currentPage++;const t=this.getQueryForBlogPagination(e);fetch(t).then((e=>e.text())).then((t=>{const o=(new DOMParser).parseFromString(t,"text/html").querySelector(`[id*="${e}"]`).innerHTML;this.renderPostGrid(o)}))}renderPostGrid(e){const t=(new DOMParser).parseFromString(e,"text/html"),o=t.getElementById("main-blog-post-grid"),n=o.innerHTML,r=parseInt(t.querySelector(".js-post-count").innerHTML),a=parseInt(t.querySelector(".js-total-post-count").innerHTML);document.querySelector(".js-post-count").innerHTML=r>=a?a:r,o.querySelector(".article")&&document.getElementById("main-blog-post-grid").insertAdjacentHTML("beforeend",n),r>=a&&(document.querySelector(".js-blog-load-more").style.display="none");const s=new URLSearchParams(window.location.search).toString();history.pushState({searchParams:s},"",`${window.location.pathname}${s&&"?".concat(s)}`)}}customElements.define("blog-load-more",BlogLoadMore);